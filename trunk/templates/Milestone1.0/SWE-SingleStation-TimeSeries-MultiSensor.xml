<?xml version="1.0" encoding="UTF-8"?>
<!-- This template is an example of a Data Stream using DataChoice to encode Multiple -->
<!-- Stations with Multiple Sensors -->
<!--  -->
<!-- Description of data -->
<!-- SWE DataStream containing 1 Stations with multiple sensors -->
<swe2:DataStream
  xmlns:swe2="http://www.opengis.net/swe/2.0"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.opengis.net/swe/2.0 http://schemas.opengis.net/sweCommon/2.0/swe.xsd">
  <swe2:elementType
    name="ioosStationData">
    <swe2:DataRecord>
      <!-- ==================== DATASTREAM-WIDE FIELDS ======================= -->
      <swe2:field
        name="time">
        <!-- Field: time -->
        <!-- Time is always the first field in the Data Record. All other fields -->
        <!-- may be nested in a data choice for multiple stations or sensors -->
        <swe2:Time
          definition="http://www.opengis.net/def/property/OGC/0/SamplingTime">
          <swe2:uom
            xlink:href="http://www.opengis.net/def/uom/ISO-8601/0/Gregorian" />
        </swe2:Time>
      </swe2:field>

      <swe2:field
        name="stationID">
        <!-- Field: stationID; -->
        <!-- For consistency, "stationID" should always be spelled out this way, -->
        <!-- (and never as, say, "station_id") using the same case, for readability. -->
        <swe2:Text
          definition="http://mmisw.org/ont/ioos/definition/stationID">
          <swe2:value>urn:ioos:station:wmo:41001</swe2:value>
          <!-- Note about Fields: -->
          <!-- Since a value block is specified here, it must not be included in any record of the DataStream -->
          <!-- Values block below. -->
        </swe2:Text>
      </swe2:field>

      <swe2:field
        name="platformLocation">
        <swe2:Vector
          definition="http://www.opengis.net/def/property/OGC/0/PlatformLocation"
          referenceFrame="https://ioostech.googlecode.com/svn/trunk/IoosCRS/IoosBuoyCRS.xml"
          localFrame="#PlatformFrame">
          <swe2:coordinate
            name="latitude">
            <swe2:Quantity
              definition="http://mmisw.org/ont/cf/parameter/latitude"
              axisID="Lat">
              <swe2:uom
                code="deg" />
              <swe2:value>32.382</swe2:value>
            </swe2:Quantity>
          </swe2:coordinate>
          <swe2:coordinate
            name="longitude">
            <swe2:Quantity
              definition="http://mmisw.org/ont/cf/parameter/longitude"
              axisID="Lon">
              <swe2:uom
                code="deg" />
              <swe2:value>-75.415</swe2:value>
            </swe2:Quantity>
          </swe2:coordinate>
          <swe2:coordinate
            name="height">
            <swe2:Quantity
              definition="http://mmisw.org/ont/cf/parameter/height"
              axisID="Z">
              <swe2:uom
                code="m" />
              <swe2:value>0.5</swe2:value>
            </swe2:Quantity>
          </swe2:coordinate>
        </swe2:Vector>
      </swe2:field>

      <swe2:field
        name="station1Sensors">
        <!-- This field is a compound element whose value is the data choice item name -->

        <!-- ======================== DATACHOICE FOR SENSORS: ======================= -->
        <swe2:DataChoice>
          <!-- DataChoice item for each station  -->
          <!-- From SWE Common 2.0 -->
          <!-- 7.4.1	DataChoice Class -->
          <!-- The “DataChoice” class (also called Disjoint Union) is modeled on the definition -->
          <!-- of ‘Choice’ from ISO 11404. It is a composite component that allows for a choice -->
          <!-- of child components. By opposition to records that carry all their fields -->
          <!-- simultaneously, only one item at a time can be present in the data when wrapped -->
          <!-- in a “DataChoice”. -->
          
          <swe2:item
            name="s1_1">
            <!-- Data Choice Item: Station 1, Sensor 1 -->

            <swe2:DataRecord>
              <!-- ==================== SENSOR-SPECIFIC FIELDS ======================= -->
              <swe2:field
                name="sensorID">
                <!-- Field: sensorID -->
                <!-- The sensorID urn may use a meaningful "component" name (eg, "sbe16"); or, -->
                <!-- if not available, a simple, constant string followed by an integer counter -->
                <!-- such as "sensor1", "sensor2", "salt1", etc. -->
                <swe2:Text
                  definition="http://mmisw.org/ont/ioos/definition/sensorID">
                  <swe2:value>urn:ioos:station:wmo:41001:sensor1</swe2:value>
                </swe2:Text>
              </swe2:field>

              <swe2:field
                name="height">
                <swe2:Quantity
                  definition="http://mmisw.org/ont/cf/parameter/height"
                  referenceFrame="#PlatformFrame">
                  <swe2:uom
                    code="m" />
                  <swe2:value>5</swe2:value>
                </swe2:Quantity>
              </swe2:field>

              <!-- The "data" fields follow (measured quantities/properties of this sensor) -->
              <swe2:field
                name="air_temperature">
                <swe2:Quantity
                  definition="http://mmisw.org/ont/cf/parameter/air_temperature">
                  <swe2:uom
                    code="Celsius" />
                </swe2:Quantity>
              </swe2:field>

              <swe2:field
                name="wind_speed">
                <swe2:Quantity
                  definition="http://mmisw.org/ont/cf/parameter/wind_speed">
                  <swe2:uom
                    code="m/s" />
                </swe2:Quantity>
              </swe2:field>
              <swe2:field
                name="wind_to_direction">
                <swe2:Quantity
                  definition="http://mmisw.org/ont/cf/parameter/wind_to_direction">
                  <swe2:uom
                    code="degrees" />
                </swe2:Quantity>
              </swe2:field>

              <!-- /////////// END SENSOR-SPECIFIC FIELDS: SENSOR 1 //////////// -->
            </swe2:DataRecord>
          </swe2:item>

          <swe2:item
            name="s1_2">
            <!-- Data Choice Item: Station 1, Sensor 2 -->

            <swe2:DataRecord>
              <!-- ==================== SENSOR-SPECIFIC FIELDS: SENSOR 2 ======================= -->
              <swe2:field
                name="sensorID">
                <swe2:Text
                  definition="http://mmisw.org/ont/ioos/definition/sensorID">
                  <swe2:value>urn:ioos:station:wmo:41001:sensor2</swe2:value>
                </swe2:Text>
              </swe2:field>

              <swe2:field
                name="height">
                <swe2:Quantity
                  definition="http://mmisw.org/ont/cf/parameter/height"
                  referenceFrame="#PlatformFrame">
                  <swe2:uom
                    code="m" />
                  <swe2:value>-2</swe2:value>
                </swe2:Quantity>
              </swe2:field>

              <!-- The "data" fields follow (measured quantities/properties of this sensor) -->
              <swe2:field
                name="sea_water_temperature">
                <swe2:Quantity
                  definition="http://mmisw.org/ont/cf/parameter/sea_water_temperature">
                  <swe2:uom
                    code="Celsius" />
                </swe2:Quantity>
              </swe2:field>
              <swe2:field
                name="dissolved_oxygen">
                <swe2:Quantity
                  definition="http://mmisw.org/ont/ioos/parameter/dissolved_oxygen">
                  <swe2:uom
                    code="mg/L" />
                </swe2:Quantity>
              </swe2:field>

              <!-- //////// END SENSOR-SPECIFIC FIELDS: SENSOR 2 /////////// -->
            </swe2:DataRecord>
          </swe2:item>

          <!-- ///////////// END DATACHOICE FOR SENSORS:  ///////////////// -->
        </swe2:DataChoice>
      </swe2:field>

      <!-- ////////////////// END DATASTREAM-WIDE FIELDS //////////////////////// -->
    </swe2:DataRecord>
  </swe2:elementType>


  <swe2:encoding>
    <!-- SWE encoding and data values -->
    <!-- swe:encoding *must* be always specified exactly as described below, -->
    <!-- to avoid the need to have fully general parsers that interpret -->
    <!-- swe:TextEncoding. That is, parsers may hard-code this particular -->
    <!-- swe:TextEncoding specification. -->
    <!--  -->
    <!-- About DataChoice from SWE Common 2.0: -->
    <!-- 9.2.5	Rules for DataChoice -->
    <!-- A “DataChoice” is encoded with the text method by providing the name of the selected item -->
    <!-- before the item values themselves. The name used shall correspond to the “name” attribute -->
    <!-- of the “item” property element that describes the structure of the selected item. -->
    <!--  -->
    <!-- This data stream interleaves different types of messages separated by the block separator -->
    <!-- character. The element type is a “DataChoice” which means that each block is composed of -->
    <!-- the item name, followed by values of the item. This example also demonstrates that items -->
    <!-- of a choice can be of different types and length. -->
    <swe2:TextEncoding
      decimalSeparator="."
      tokenSeparator=","
      blockSeparator="&#10;" />
  </swe2:encoding>
  <swe2:values> 2009-05-23T00:00:00Z,s1,s1_1,15.4,2.0,280 2009-05-23T01:00:00Z,s1,s1_1,15.8,1.8,121
    2009-05-23T02:00:00Z,s1,s1_1,15.6,1.0,142 2009-05-23T00:00:00Z,s1,s1_2,5.6,8.0
    2009-05-23T01:00:00Z,s1,s1_2,5.8,8.2 2009-05-23T02:00:00Z,s1,s1_2,5.7,8.5
    2009-05-23T00:00:00Z,s2,s2_1,16.2 2009-05-23T01:00:00Z,s2,s2_1,16.4
    2009-05-23T02:00:00Z,s2,s2_1,16.5 2009-05-23T00:00:00Z,s2,s2_2,6.1
    2009-05-23T01:00:00Z,s2,s2_2,6.3 2009-05-23T02:00:00Z,s2,s2_2,6.5 </swe2:values>
</swe2:DataStream>
