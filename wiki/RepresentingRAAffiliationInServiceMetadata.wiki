#summary Ideas and a few examples showing how to annotate RA and Federal Partner affiliation in service metadata.
#labels Phase-Requirements,Phase-Implementation

= Introduction =

We have a need to have each service in IOOS (SOS, THREDDS/OPeNDAP, ERDDAP etc) self documented in such a way that their affiliation with one of the Regional Associations and/or Federal Partners is clear and machine readable.  We need to do this in such a way as to allow a many to many relationship between a server and a region/federal partner.

_*Question*:  Is the statement above (many to many) true? Are there cases where a server belongs to both a region and a federal or other type of entity?  The example that comes to mind is NERRS and SECOORA but there may be others.  Jeremy/Vembu?_

One use case for this need is having the [DataCatalog IOOS Data Catalog] regularly harvest service metadata from a server and properly attribute the server to a region for plotting or another summary purpose.  Finally, an intermediate term goal for all of us is to have the Annual Non-Federal Observation Asset Inventory automated.  [Requirement Requirement].

= SOS Capabilities XML =
In the `<ServiceIdentification>` section of the SOS capabilities response, include the following keyword markup.

<code language="xml" indent="true">
<ows:Keywords>
  <ows:Keyword>aoos</ows:Keyword>
  <ows:Keyword>Alaska</ows:Keyword>
  <ows:Keyword>ocean</ows:Keyword>
  <ows:Keyword>observing</ows:Keyword>
  <ows:Keyword>...</ows:Keyword>
</ows:Keywords>
</code>

The RA acronym should appear as one of the keywords and each keyword should appear as a separate `<ows:Keyword></ows:Keyword>` element.  The DataCatalog will parse the keywords list looking for the 11 RA acronyms.  Ideally the RA acronym would be the first keyword but that may not be necessary.  This search is not case sensitive.


= ISO 19119/19139 Service Metadata =
The ISO service metadata describes geospatial web services.  It is general and can encompass many of the elements in the SOS capabilities XML as well as many more elements capabilities XML cannot describe.  Currently (circa 2001) it is most often used in IOOS to describe servers which have the ability to automatically provide ISO service metadata through ncISO ([https://groups.google.com/forum/#!forum/ncisometadata Google Group], [http://www.ngdc.noaa.gov/eds/tds/ Home page]).  This plugin can be enabled in any THREDDS server newer than v 4.2.8 although 4.2.9 is preferrred.  Additionally, both Hyrax and ERDDAP are working on porting the ncISO plugin to their environments.  ncISO can be run as a command line client tool in addition to a server side plugin.

== Mapping from NetCDF to ISO via ncISO ==

Unidata Attribute Conventions for Dataset Discovery (ACDD) ([https://geo-ide.noaa.gov/wiki/index.php?title=NetCDF_Attribute_Convention_for_Dataset_Discovery ACDD on the GEO-IDE wiki])
{{{
variable.attribute = 'AOOS'
}}}
What goes above exactly?

See also: https://geo-ide.noaa.gov/wiki/index.php?title=NetCDF_and_ISO_Metadata

== Writing ISO directly ==

TODO: Give a better example here.

https://geo-ide.noaa.gov/wiki/index.php?title=ISO_Components#CI_ResponsibleParty

NOTE: The link above only shows the ISO element that we should use, it does not necessarily show the right implementation for this purpose nor does it show where to put it in the overall document.  Need a full XPath.