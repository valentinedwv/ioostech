#summary Information about selecting and using Controlled Vocabularies for developers of IOOS services.
#labels Phase-Requirements,Phase-Design,Vocabularies

<wiki:toc max_depth="3" />


= Introduction =

Developers of IOOS services should strive to use Controlled Vocabularies whenever appropriate.  This page describes some options for Controlled Vocabularies to chose from, examples of how to implement them in various data formats and information about how to update existing vocabularies.  The material presented here should evolve into a policy but currently there are several open questions to be resolved.  

The closest thing to policy we currently have is that IOOS data providers should use the [http://cf-pcmdi.llnl.gov Climate and Forecast Standard Names] when referring to variables (used synonymously with parameters here).  This applies to both netCDF files and to the various outputs of an SOS service (i.e. as column headings in a CSV file). [Requirement Requirement]

However, there is also a vocabulary developed during the Data Integration Framework project by Matt Howard, Sara Haines and others which has been titled the IOOS Parameter Vocabulary.  Both the [http://mmisw.org/orr/#http://mmisw.org/ont/cf/parameter CF table] and version 1.0 of the [http://mmisw.org/orr/#http://mmisw.org/ont/ioos/parameter IOOS Parameter Vocabulary] are currently hosted (v1.0) at the [http://mmisw.org/orr/#b MMI Ontology Registry and Repository].  


Additionally, the [http://sweet.jpl.nasa.gov/ontology/ NASA SWEET] project hosts fairly mature vocabularies with the additional benefit of attempting to provide a framework for relating them together into ontologies.  

Eventually, I'd like to identify exactly where in the SOS responses and requests each controlled vocabulary is relevant and needs to be addressed.
 

= Issues and Open Questions =

  # Which vocabularies should be used in what situations?
  # How are deficiencies identified, documented and passed along to the right people so that they can be addressed. (e.g. if you have a new term not on any existing list, who do you tell and what will they do about it?)
  # How can we be good stewards in the community and participate in the process without bringing progress to a grinding halt?  (e.g. create temporary solutions for the immediate term but *ensure* that the long term vocabulary maintenance is done too.)
  # How do we harmonize with the many other vocabularies that have been developed in the regions?
  # How do we utilize or mature the vocabularies left over from the DIF at http://www.ioos.gov/gml/IOOS/0.6.1/dictionaries/phenomenaDictionary.xml ?
The target set of controlled vocabulary types we will likely need are:

 * organization type (eg, Federal agency, IOOS Regional Association,  state agency, industry)
 * organizational role (service provider, data provider or asset owner)
 * keywords (including geographical regions?)
 * platform (asset) type
 * observed property
 * units-of-measure


= Observed Property Vocabularies =

Guidelines: 
 # Use CF standard names (but what about versions?)

The SURA Modeling Testbed tool at http://testbedwww.sura.org/model-dev/ has a really interesting combination of models and data (I think) where controlled vocabularies for measurements are used. It's worth assessing these, chatting with people in that team (ASA, Kyle Wilcox??), etc. For example, it's clear to me that while many/most of the names used are in fact CF standard names, many must be made up, but using CF recommendations for building names. 

That's a general approach that we've discussed and that I think we should follow: use CF when an appropriate parameter exist; provide a nimble, IOOS-controlled vocabulary on MMI for parameters not yet on the CF list, striving to follow CF naming patterns for these new parameters, and abundant documentation: names, definitions, linkages to other relevant vocabularies (such as those from [http://qwwebservices.usgs.gov/service-domains.html#CROSSWALK USGS], [http://his.cuahsi.org/mastercvreg.html CUAHSI]), most common units, etc; we have a great starting point already, in the form of the "IOOS-specific parameter vocabularies on MMI" I've listed below. For existing CF parameters, there's sometimes ambiguity and apparent redundancy; we can also provide guidance on preferred parameters, when such ambiguity exists (eg, for barometric pressure).

In the case mentioned above, it would also be useful for us have an active role with the CF Standard Name process.  We can add a term to the IOOS vocabulary, but it would be worth also proposing that name to CF.  If CF approves the new term we would then have a choice to make in terms of which reference or identifier we should use.

Other ontologies / controlled vocabularies (some less controlled than others...) directly relevant to IOOS DMAC:
  # *CF resources on MMI*. I've found several pages and resources at MMI that are directly focused on CF, but may not be well integrated or cross-linked and have different degrees of currency (out of date).
    * [http://marinemetadata.org/references/cfstandardnames CF - Climate and Forecast Standard Names; Vocabulary for CF parameters] (a document, not a vocabulary resource per se)
    * [http://marinemetadata.org/community/teams/vocdev/generaldocuments/orrcf Using the ORR CF Standard names Vocabulary]
    * [http://mmisw.org/ont/cf/parameter Climate and Forecast (CF) standard names parameter vocabulary]
  # *IOOS-specific parameter vocabularies on MMI*
    * [http://mmisw.org/ont/ioos/parameter IOOS Parameter Vocabulary V.1.0]
    * [http://mmisw.org/ont/secoora/parameter SECOORA Parameter Vocabulary]
    * [http://mmisw.org/ont/gcoos/parameter GCOOS Vocabulary]

== Existing Observed Property Vocabularies ==

|| Controlled Vocabulary || URL for information || URL for reference ||
|| Climate and Forecast Standard Names || http://cf-pcmdi.llnl.gov/ and http://cf-pcmdi.llnl.gov/documents/cf-standard-names/ || http://mmisw.org/ont/cf/parameter/PROPERTYNAME ||
|| IOOS Parameter Vocabulary v1.0 || ?? || http://mmisw.org/ont/ioos/parameter/PROPERTYNAME ||
|| IOOS DIF GML Dictionary || ?? || http://www.ioos.gov/gml/IOOS/0.6.1/dictionaries/phenomenaDictionary.xml#PROPERTYNAME  ||
|| SWEET || http://sweet.jpl.nasa.gov/ || http://sweet.jpl.nasa.gov/2.2/VOCAB.owl#PROPERTYNAME ||
|| OGC Terms (URL) || ?? || ?? ||
|| OGC Terms (URN) || ?? || ogc:def:phenomenon:mmisw.org:cf:PROPERTYNAME || 
|| GCOOS || ?? || http://mmisw.org/ont/gcoos/parameter/ ||
|| SECOORA || ?? || http://mmisw.org/ont/secoora/parameter/ ||

A list of tables with examples of how the various observed property vocabularies are used across example services can be found on the [ControlledVocabularyTables ControlledVocabularyTables Page]

== Composite Properties ==

Currently have at least two compound or composite properties in use.  

 * GML Dictionaries
 * CF like names 
 * How are composite properties used in SOS 1.0?
 
===Current NDBC usage of winds/waves===
From GetCapabilites OperationsMetadata section:
{{{
<ows:Parameter name="observedProperty">
<ows:AllowedValues>
<ows:Value>air_temperature</ows:Value>
<ows:Value>air_pressure_at_sea_level</ows:Value>
<ows:Value>sea_water_electrical_conductivity</ows:Value>
<ows:Value>currents</ows:Value>
<ows:Value>sea_water_salinity</ows:Value>
<ows:Value>sea_floor_depth_below_sea_surface</ows:Value>
<ows:Value>sea_water_temperature</ows:Value>
<ows:Value>waves</ows:Value>
<ows:Value>winds</ows:Value>
</ows:AllowedValues>
</ows:Parameter>
</ows:Operation>
}}}
From GetCapabilities offerings:
{{{
<observedProperty xlink:href="http://mmisw.org/ont/cf/parameter/air_temperature"/>
<observedProperty xlink:href="http://mmisw.org/ont/cf/parameter/air_pressure_at_sea_level"/>
<observedProperty xlink:href="http://mmisw.org/ont/cf/parameter/sea_water_electrical_conductivity"/>
<observedProperty xlink:href="http://mmisw.org/ont/cf/parameter/currents"/>
<observedProperty xlink:href="http://mmisw.org/ont/cf/parameter/sea_water_salinity"/>
<observedProperty xlink:href="http://mmisw.org/ont/cf/parameter/sea_floor_depth_below_sea_surface"/>
<observedProperty xlink:href="http://mmisw.org/ont/cf/parameter/sea_water_temperature"/>
<observedProperty xlink:href="http://mmisw.org/ont/cf/parameter/waves"/>
<observedProperty xlink:href="http://mmisw.org/ont/cf/parameter/winds"/>
}}}

Issues with the above usage:
 # waves and winds are not actually CF standard names
 
Data Columns returned from a [http://sdf.ndbc.noaa.gov/sos/server.php?request=GetObservation&service=SOS&offering=urn:ioos:network:noaa.nws.ndbc:all&featureofinterest=BBOX:-90,25,-85,30&observedproperty=Winds&responseformat=text/csv GetObservation (CSV) request] for winds:
 * station_id	
 * sensor_id	
 * latitude (degree)	
 * longitude (degree)	
 * date_time	
 * depth (m)	
 * wind_from_direction (degree)	
 * wind_speed (m/s)	
 * wind_speed_of_gust (m/s)	
 * upward_air_velocity (m/s)

Data columns returned from a [http://sdf.ndbc.noaa.gov/sos/server.php?request=GetObservation&service=SOS&offering=urn:ioos:network:noaa.nws.ndbc:all&featureofinterest=BBOX:-90,25,-85,30&observedproperty=Waves&responseformat=text/csv GetObservation (CSV) request] for waves

URL http://sdf.ndbc.noaa.gov/sos/server.php?request=GetObservation&service=SOS&offering=urn:ioos:network:noaa.nws.ndbc:all&featureofinterest=BBOX:-90,25,-85,30&observedproperty=Waves&responseformat=text/csv
 * station_id	
 * sensor_id	
 * latitude (degree)	
 * longitude (degree)	
 * date_time	
 * sea_surface_wave_significant_height (m)	
 * sea_surface_wave_peak_period (s)	
 * sea_surface_wave_mean_period (s)	
 * sea_surface_swell_wave_significant_height (m)	
 * sea_surface_swell_wave_period (s)	
 * sea_surface_wind_wave_significant_height (m)	
 * sea_surface_wind_wave_period (s)	
 * sea_water_temperature (c)	
 * sea_surface_wave_to_direction (degree)	
 * sea_surface_swell_wave_to_direction (degree)	
 * sea_surface_wind_wave_to_direction (degree)	
 * number_of_frequencies (count)	
 * center_frequencies (Hz)	
 * bandwidths (Hz)	
 * spectral_energy (m**2/Hz)	
 * mean_wave_direction (degree)	
 * principal_wave_direction (degree)	
 * polar_coordinate_r1 (1)	
 * polar_coordinate_r2 (1)	
 * calculation_method	
 * sampling_rate (Hz)

Definition of Waves in the IOOS GML Dictionary http://www.ioos.gov/gml/IOOS/0.6.1/dictionaries/phenomenaDictionary.xml

{{{
<gml:definitionMember>
<swe:CompositePhenomenon gml:id="NonDirectionalWaves" dimension="15">
<gml:description>Wave measurements.</gml:description>
<gml:identifier codeSpace="urn:x-noaa:ioos:def:phenomenonNames">Waves</gml:identifier>
<swe:component xlink:href="#SignificantWaveHeight"/>
<swe:component xlink:href="#DominantWavePeriod"/>
<swe:component xlink:href="#AverageWavePeriod"/>
<swe:component xlink:href="#SwellHeight"/>
<swe:component xlink:href="#SwellPeriod"/>
<swe:component xlink:href="#WindWaveHeight"/>
<swe:component xlink:href="#WindWavePeriod"/>
<swe:component xlink:href="#WaterTemperature"/>
<swe:component xlink:href="#WaveDuration"/>
<swe:component xlink:href="#CalculationMethod"/>
<swe:component xlink:href="#SamplingRate"/>
<swe:component xlink:href="#NumberOfFrequencies"/>
<swe:component xlink:href="#CenterFrequency"/>
<swe:component xlink:href="#Bandwidth"/>
<swe:component xlink:href="#SpectralEnergy"/>
</swe:CompositePhenomenon>
</gml:definitionMember>
<gml:definitionMember>
<swe:CompositePhenomenon gml:id="Waves" dimension="23">
<gml:description>Directional waves</gml:description>
<gml:identifier codeSpace="urn:x-noaa:ioos:def:phenomenonNames">Waves</gml:identifier>
<swe:base xlink:href="#NonDirectionalWaves"/>
<swe:component xlink:href="#MeanWaveDirection"/>
<swe:component xlink:href="#SwellWaveDirection"/>
<swe:component xlink:href="#WindWaveDirection"/>
<swe:component xlink:href="#DirectionalWaveParameter"/>
<swe:component xlink:href="#FourierCoefficientA1"/>
<swe:component xlink:href="#FourierCoefficientA2"/>
<swe:component xlink:href="#FourierCoefficientB1"/>
<swe:component xlink:href="#FourierCoefficientB2"/>
</swe:CompositePhenomenon>
</gml:definitionMember>
}}}

Couple things of note:
Not all of the wave components are defined in the GML composite phenomenon definition

= Units of Measure =

Clarification of the units of measure representation in output files. Is there a clear OGC recommendation at this time? Perhaps a follow up with Luis Bermudez? UCUM, UOM definied in OGC dictionaries? Udunits?

  * [http://unitsofmeasure.org/ Universal Code for Units of Measure]
  * [http://www.unidata.ucar.edu/software/udunits/ UDUNITS]
  * OGC Best Practices circa 2002 [http://portal.opengeospatial.org/files/?artifact_id=11498 OpenGIS© Recommendation Paper — Units of Measure Use and Definition Recommendations] may be outdated??
  * [https://portal.opengeospatial.org/files/?artifact_id=8814 OGC URN definitions with some reference to units of measure]

= Organization Types and Roles  =
(Regional Association, Provider/Owner, etc)
  * [https://groups.google.com/d/msg/ioostech_dev/aAsiZta7mVs/WUfVKMalZf0J Relevant discussion thread from ioostech_dev, from Oct 2011 (_Institution roles in SOS & IOOS Catalog: "Organization" vs "Data Provider"_)]
  * _Describe convention used by Eric in the IOOS Catalog, and also [NANOOSNVSPythonSOS adopted by the NANOOS SOS service]_ It's the name from XPath /sml:member/sml:System/sml:contact/sml:ResponsibleParty/sml:organizationName, but I can't remember which "contactType role" is being used (eg, <sml:contact xlink:role="urn:ogc:def:classifiers:OGC:contactType:owner"> below) when multiple roles are listed in the response.

Example:
{{{
<sml:contact xlink:role="urn:ogc:def:classifiers:OGC:contactType:owner">
    <sml:ResponsibleParty>
        <sml:organizationName>ORCA-UW</sml:organizationName>
        <sml:contactInfo>
            <sml:address>
                <sml:country>USA</sml:country>
            </sml:address>
            <sml:onlineResource xlink:href="http://orca.ocean.washington.edu" />
        </sml:contactInfo>
    </sml:ResponsibleParty>
</sml:contact>
}}}

See also [DescribeSensorMetadataForIOOSSOS discussion by Micah, in wiki page DescribeSensorMetadataForIOOSSOS].

And [https://geo-ide.noaa.gov/wiki/index.php?title=Sensor_Observation_Service_Capabilities_and_ISO_Metadata Ted Habermann's synopsis on the GEO-IDE wiki]

= Platform/Station types =

Document existing practices and options regarding controlled vocabularies for "platform types" in SensorML DescribeSensor responses. [http://mmisw.org/ont/mmi/platform/ MMI vocabulary]. Note the use of Classification terms from http://mmisw.org/ont/mmi/platform/ . Consequences for IOOS Catalog, including the use of NVS asset-type map icons.

Station Classifiers (in sml:classification/sml:ClassifierList) used in the NANOOS SOS as a draft incomplete implementation, borrowing from either NDBC or NOS/COOPS and possibly others:
{{{
<sml:classifier name="System Type Identifier">
    <sml:Term definition="urn:ioos:def:classifier:NOAA::systemTypeID">
        <sml:codeSpace xlink:href="http://mmisw.org/ont/mmi/platform/" />
        <sml:value>Platform</sml:value>
    </sml:Term>
</sml:classifier>
<sml:classifier name="Platform Type">
    <sml:Term definition="urn:ioos:def:classifier:NOAA:platformType">
        <sml:codeSpace xlink:href="http://nvs.nanoos.org"/>
        <sml:value>MOORED BUOY</sml:value>
    </sml:Term>
</sml:classifier>
}}}

A question I've had about this implementation is, _what the heck is "urn:ioos:def:classifier:NOAA:" referring to?_ I know these urn's don't have to correspond to anything that's documented (much less actual URL's), but are these instances referring to anything that's been discussed or decided before?

_DPS Comment: There is a significant conflict in our use of station and platform as synonyms that will be especially evident when we get to the point of tracing lineage within SensorML.  In my mind a platform is a piece of equipment that hosts or carries one or more instruments or sensors.  It can be moved, it has a beginning and ending, and most importantly it's configuration can be modified which raises the requirement to trace the lineage of any data originating from a platform.  A station on the other hand is a fixed location at which a platform might be deployed for a finite period of time.  The station may persist longer than any one platform deployment at that site.  Think of the many different instruments that have derived CO2 at the Mauna Loa site where the [http://en.wikipedia.org/wiki/Keeling_Curve Keeling Curve] was observed as an example of this concept. What are the implications if we adopt this view of those two terms?_
  
See also [DescribeSensorMetadataForIOOSSOS discussion by Micah, in wiki page DescribeSensorMetadataForIOOSSOS].


== NANOOS NVS Asset types and icons ==
_Note to self_: Describe and make the [http://nvs.nanoos.org NVS] asset/platform-type map icons available through this wiki later on.
See Mayorga et al, 2010 ("NVS DMAC" Oceans'10 paper).

*Asset classes:*
  * _Stationary In-Situ Observations (SISO)_. Current types: Buoy, Fixed Shore Station, River Gage, Land Station, Seabed Cabled Observatory
  * _Moving-Location observations (MLOC)_. Cruises, AUV's
  * _Gridded Regular and Irregular Data (GRID)_. Models (forecasts), remote sensing imagery, etc.



=Links and yet to be organized errata=
http://marinemetadata.org/conventions/vocabularies

  * Work on water quality (?) vocabularies that Matt Howard and Cyndy Chandler are starting up (no URL that I know of). Matt is also leading a vocabulary effort focused on Gulf of Mexico, related to Deepwater Horizon recovery efforts.
  * [http://www.bco-dmo.org/ BCO-DMO] and [http://cdmo.baruch.sc.edu/ NERRS CDMO] are also excellent resources for water quality and biogeochemistry. [http://cdmo.baruch.sc.edu/data/parameters.cfm For NERRS, this "Parameters" page is very relevant].
  * [https://geo-ide.noaa.gov/wiki/index.php?title=In-situ_data_%28sensors,_groups_of_sensors,_platforms,_etc.%29 (Geo-IDE Wiki) In-situ data (sensors, groups of sensors, platforms, etc.)]
  * [http://www.bodc.ac.uk/products/web_services/vocab/ British Oceanographic Data Center (BODC) NERC Vocabulary Server]. 
  * [http://www.seadatanet.org/ SeaDataNet (European project)] Device Categories vocabulary, [http://vocab.ndg.nerc.ac.uk/list/L05/current served from the BODC NERC]
  * [http://www.seadatanet.org/Standards-Software/Common-Vocabularies SeaDataNet Common Vocabularies]
  * SeaDataNet Common Vocabularies
    * [http://seadatanet.maris2.nl/v_bodc_vocab/search.asp?name=(L06)%20SeaVoX+Platform+Categories&l=L06 L06 SeaVoX Platform Categories]
    * [http://seadatanet.maris2.nl/v_bodc_vocab/search.asp?name=(L061)%20SeaVoX+Platform+Classes&l=L061 L061 SeaVoX Platform Classes]
    * [http://seadatanet.maris2.nl/v_bodc_vocab/search.asp?name=(L062)%20SeaVoX+Platform+Class+Categories&l=L062 L062 SeaVoX Platform Class Categories]
  * Probably resources at IODE/IOC
  * The work on an IOOS Non-Federal Asset Inventory in early-mid 2011 (previously led by Sam Walker) also used some relevant semi-controlled vocabularies; these should be examined.
  * [http://data.nodc.noaa.gov/geoportal/ New NODC Geoportal]. Potentially it may use relevant controlled vocabularies that could facilitate wider discovery across IOOS, NODC, etc?
  * [http://cdi.gleon.org/ GLEON-CDI] (lakes). A [http://gleon.org/gleon-bb/viewtopic.php?f=3&t=18#p58 GLEON CV Excel spreadsheet is mentioned and linked to in this 2010 forum thread]
  * [http://www.citeulike.org/user/emayorga/tag/ioos,informatics My CiteULike collection of peer-reviewed journal articles broadly related to this topic]

==CMSP Discovery Vocabularies Workshop==
December 1-3, 2010
WHOI (With USGS/NOAA sponsorship)
http://www.whoi.edu/page.do?pid=49656
Workshop report is available from the page above or directly from http://www.whoi.edu/fileserver.do?id=77984&pt=2&p=84468

There was useful information gathered prior to the meeting and included in the appendices of the report on existing Crosswalks, Repositories, Metadtaa Standards, Tools, and Vocabularies in use.  Most important for IOOS, are some firm recommendations on how to choose vocabularies and the importance of a mature process for extending/updating vocabularies when they do not meet our exact needs.  

Matt Howard and some others from the IOOS community are exploring how best to extend IOOS vocabularies into the biogeochemical and water quality domains.

==IOOS Biological Data Project==
Hassan Moustahfid from the IOOS PO led a project with three agencies in Hawaii aimed at developing a common exchange data format for exchanging reef fish survey data (presence, absence, abundance of reef fish as determined by visual sampling procedures).  A large part of that development involved agreeing on vocabularies to be used by all three agencies.  The solution was an extension of the Darwin Core standard for biological observations and was developed in conjunction with OBIS USA.  
[http://www.ioos.gov/ecosystem_observations/welcome.html Click Projects tab on this page]
How do we use this?  Is it extensible?  What about the overlap with existing standards like CF and the IOOS Param Voc?  

Biodiversity Information Standards (formerly known as Taxonomic Data Working Group) http://www.tdwg.org/

Schema Terminology will be based on ratified [http://rs.tdwg.org/dwc/ Darwin core], Dublin core and proposed IOOS vocabularies. XML guide will also based on Darwin core XML guidance.

  * CF Conventions had been applied to biological data definition at the field level. This is to assure that IOOS Biological Project will be compatible with other geophysical datasets.
  * FGDC and ISO 19115-2 are the adopted Metadata standards.
  * ERDDAP is the main webservice for this project.
  * EDC is the client developed to connect directly to ERDDAP and access data using customer application tools such as ARCGIS and R Project.
  * To learn more about the Biological data standards implemented at the Pacific Islands Region please follow the following links:
Biological data services at the Pacific Islands Region website
FGDC and ISO Metadata

== IOOS Vars RDF ==

Dictionaries and Ontologies, such as those hosted at MMI allow machine mapping's between controlled vocabularies.  The IOOS Catalog adopted a simple Ontology which allows the User Interface to map IOOS variables, e.g. Winds to the CF Terms used by some of the regional SOS's.  This is a very simple ontology, see below, which only makes use of the NarrowMatch triple store's thus Winds is mapped to wind_speed, wind_direction, etc.  [ControlledVocabularyTables#IOOS_Vars_RDF See the XML listing here.]
----