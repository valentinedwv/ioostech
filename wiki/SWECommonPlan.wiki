#summary Plan for developing SWE Common response for SOS GetObservation requests.
#labels Phase-Requirements,Phase-Design,SOS,SWE,Featured

<wiki:toc max_depth="2" />

= Introduction =

Meeting details at the [SOSReferenceImplementationWorkshop  meeting page].

[https://docs.google.com/a/noaa.gov/document/d/1czWdBFjPmAEtLe5T3_54fwk2cUdbILwWPkIDKPKFNvY/edit?hl=en_US Deprecated Google Docs version of this plan]. 


Define SWE Common encodings for all of the CF sampling feature types that:

 * provide all the information required for accurate plotting of the data
 * are simple and easy to publish
 * are simple and easy to read
 * are optimized for minimum size, reduce accessing time
 * provide all information necessary to unambiguously identify essential characteristics of the CF sampling feature types (should enable nearly lossless translation between the two encoding standards)
 * Provide a mechanism to encode quality information along with data values

= Roadmap =
This section needs to be fleshed out and assigned to individuals, preferably with dates associated with them at which time the responsible party will report back to the group.  Note, the reports does not imply a complete solution.

 * identify data sources for each feature type (actual source data including platform metadata)
 * resolve ambiguities surrounding SOS 1.0 and 2.0 interpretation of “procedure, observationOffering, featureOfInterest, observedProperty”
 * create templates for each feature type
 * implement SOS services for each feature type at each RA
 * test by multiple clients


= Issues to Resolve Prior to the Meeting = 
Each issue below needs to be addressed prior to the meeting. Ideally one person will volunteer to lead the discussion for each of the major topics so that we are prepared to make decisions at the meeting.


 * We need a plan for including more metadata in the capabilities response to enable automatic harvesting by the IOOS catalog and other harvesting portals  (See OGC 06-121r9 - OGC Web Services Common Standard Version 2.0.0 for more information on common elements across OGC web services especially including relationships to ISO 1911x standards)


== CF Feature Types (Kyle) ==
Gather a [CFFeatureTypes list] of the sampling feature types currently in use among the IOOS regions and NDBC/CO-OPS.  Then associate a few actual platform types to each sampling feature types so that we have a sense of the information available in the  databases in use by IOOS partners.
Examples from the OGC site: [http://external.opengis.org/twiki_public/NREwg/SWECommonNetCDFTutorial]

[http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#id36261967 ]
http://www.ogcnetwork.net/GEOSS_Climate_Workshop_2011
[https://portal.opengeospatial.org/files/?artifact_id=46131 WCS 2.0 Extension for netCDF-CF; CSW and THREDDS Interoperability]

== Vocabularies (CJ, Emilio will help) ==

What is the entire suite of parameters we need to consider for inclusion in the data file?  We need to compile a list of all of the currently known parameters and link them to the best vocabulary terms (if translations are necessary).

See [ControlledVocabularies] for more information including a table that begins to tackle this with terms from the NOAA Chesapeake Bay Office database.

All CF parameter names (and IOOS Parameter Vocabulary v1.0 terms) should be referenced by URLs pointing to the [mmisw.org/orr/ MMI Ontology Registry and Repository].   For example, [http://mmisw.org/ont/cf/parameter/air_temperature_anomaly].

There are other vocabularies that are often referenced by URNs.  Specifically, those managed by OGC.  How do we resolve this?  

=== Units of Measure and Time encoding ===
Clarification of the units of measure representation in output files.  Is there a clear OGC recommendation at this time?  Perhaps a follow up with Luis Bermudez?  UCUM, UOM definied in OGC dictionaries?  Udunits?

Issues with ISO 8601 and encoding time zones or time offsets

=== Platform Types and Unique Identifiers ===
The current IOOS Guidance for encoding platform identifiers using URNs is documented at [https://geo-ide.noaa.gov/wiki/index.php?title=IOOS_Conventions_for_Observing_Asset_Identifiers].  Does this deserve review or is it clear enough as is?

URN vs URL within the identifier discussion.

== SOS Data Model (Eric, Emilio) ==

Ambiguity in the SOS 1.0 and 2.0 data model.  This issue has been discussed by the OGC Hyrology DWG and they have not reached a conclusion that is conformant to the SOS 1.0 spec as they understand it.  There are implications for the format of the responses from all three SOS core operations (GetCapabilities, DescribeSensor, GetObservation).  There are also performance implications due to the way searches must be performed.


== Encoding Quality Control Flags (Mohamed) ==
NDBC and CO-OPS will both be working on this in FY12 and certification of RAs will require this as well.  High priority topic but for the purposes of the group the problem is about encoding QC flags, not defining or selecting QC tests.

Consider q2o.whoi.edu as a source of information.
http://dl.dropbox.com/u/8611634/swe2011/swe2011_submission_9.pdf

== Testing (Jeremy) ==

see also [SOSTesting] [SOSSurvey], and [SOSVersions]

Initial testing is designed more towards a survey of existing SOS GetCapabilities,DescribeSensor and GetObservation services that have been submitted to the CatalogEndpoints document/spreadsheet.  For initial purposes, just looking at one (hopefully representative) SOS from each RA or other agency.  Also for initial purposes only considering single in-situ representations and not profiles or trajectories.

An initial simple perl script was setup to read submitted SOS endpoints and detail the number of platforms and observation types and their locations based on the GetCapabilities document.  The script also parses based on whether full xml namespaces are used and reports the vocabulary prefix in effect and provides a kml file of the platform locations.

This script can be used along with Eric Bridger's similar browser application which provides similar information at http://dev.neracoos.org/IOOSCatalog3/SOSTester/catalog_end_points.html  (starfish/starfish)

In addition to the above summary SOS information, creating a xsd(xml schema document) from a provided xml was used(the 'trang' tool) to compare existing schema/element differences between the existing SOS GetCapabilities documents.

Testing and categorization/compliance would be broken into 3 parts
  * a survey and categorization step to identify,categorize and describe existing SOS services to a known or new reference
  * differences in schema  - xsd reference and differences
  * differences in vocabulary - the listing/range of possible element/prefix terms and differences


= Resources= 
== Example Files ==
http://code.google.com/p/ioostech/source/browse/ndbc_swe_sample-2011-10-19.xml NDBC example of temperature observations from a collection of moored buoys.  There are several other examples in the source repository now [http://code.google.com/p/ioostech/source/browse/]

== Reference Docs (Discussion Papers and Specifications) ==
http://external.opengis.org/twiki_public/NREwg/GMESPHInstrumentCapabilities

http://external.opengis.org/twiki_public/HydrologyDWG/SOSServingWaterML20

http://opengeo.org/publications/opengeo-swe/

http://opengeo.org/publications/opengeo-swe/OpenGeo-SWE.pdf

http://code.google.com/p/swe-common-data-framework/

http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#id36261967

http://external.opengis.org/twiki_public/NREwg/SWECommonNetCDFTutorial

http://code.google.com/p/swe-common-data-framework/

Jirka, S., and C. Stasch.  Concept for a Lightweight SWE Profile.  Accessed 01 February 2012 from [http://external.opengis.org/twiki_public/pub/HydrologyDWG/SOSUsageAndServerTypeDiscussion/Lightweight_SWE_Profile_Draft.pdf Concept for a Lightweight SWE Profile URL]


Bermudez, L., T. Cook, et al. (2009). Web feature service (WFS) and sensor observation service (SOS) comparison to publish time series data, IEEE.  [http://ieeexplore.ieee.org/Xplore/login.jsp?url=http%3A%2F%2Fieeexplore.ieee.org%2Fstamp%2Fstamp.jsp%3Ftp%3D%26arnumber%3D5067460&authDecision=-203 Abstract]
	
	
Botts, M., G. Percivall, et al. (2008). OGC Sensor Web Enablement: Overview and High Level Architecture. GeoSensor Networks. N. Silvia, L. Alexandros and S. Anthony, Springer-Verlag: 175-190.  DOI:10.1007/978-3-540-79996-2_10 

	
Bröring, A., J. Echterhoff, et al. (2011). "New Generation Sensor Web Enablement." Sensors 11(3): 2652-2699.  DOI:doi:10.3390/s110302652 http://www.mdpi.com/1424-8220/11/3/2652/


Consortium, O. G. (2007). OpenGIS® Sensor Model Language (SensorML) Implementation Specification, Open Geospatial Consortium. http://portal.opengeospatial.org/files/?artifact_id=21273

	
Consortium, O. G. (2007). OpenGIS® SensorML Encoding Standard, version 1.0 Schema - Corrigendum 1, Open Geospatial Consortium. http://portal.opengeospatial.org/files/?artifact_id=24757

	
Consortium, O. G. (2007). Sensor Observation Service 1.0, Open Geospatial Consortium: 104. http://portal.opengeospatial.org/files/?artifact_id=26667

	
Consortium, O. G. (2011). Observations and Measurements - XML Implementation V2.0, Open Geospatial Consortium. http://www.opengis.net/doc/IS/OMXML/2.0

	
Consortium, O. G. (2011). OGC SWE Common Data Model Encoding Standard, Open Geospatial Consortium. http://portal.opengeospatial.org/files/?artifact_id=41157

	
Consortium, O. G. (2011). OpenGIS® SWE Service Model Implementation Standard, Open Geospatial Consortium. 
http://www.opengis.net/doc/IS/SWES/2.0 or [http://portal.opengeospatial.org/files/%3fartifact_id=38476 SWE Service Model v2.0]

	
Hankin, S. C., J. D. Blower, et al. (2009). NetCDF-CF-OPeNDAP: Standards for Ocean Data Interoperability and Object Lessons for Community Data Standards Processes. OceanObs09. Venice, Italy. 

	
Janowicz, K., A. Bröring, et al. (2011). "A RESTful proxy and data model for linked sensor data." International Journal of Digital Earth: 1-22.  DOI:10.1080/17538947.2011.614698 http://dx.doi.org/10.1080/17538947.2011.614698


Mazzetti, P., S. Nativi, et al. (2009). "RESTful implementation of geospatial services for Earth and Space Science applications." International Journal of Digital Earth 2(sup1): 40-61.  DOI:10.1080/17538940902866153 http://dx.doi.org/10.1080/17538940902866153


Na, A. and M. Priest (2007). Sensor Observation Service Version 1.0. O. G. C. Inc. 1.0: 90. http://portal.opengeospatial.org/files/?artifact_id=26667

	
Nativi, S., J. Caron, et al. (2008). "Unidata’s Common Data Model mapping to the ISO 19123 Data Model." Earth Science Informatics 1(2): 59-78.  DOI:10.1007/s12145-008-0011-6 http://dx.doi.org/10.1007/s12145-008-0011-6


Sheth, A., C. Henson, et al. (2008). "Semantic sensor web." IEEE Internet Computing: 78-83.  

	
Tamayo, A., P. Viciano, et al. (2011). Empirical Study of Sensor Observation Services Server Instances
Advancing Geoinformation Science for a Changing World. S. Geertman, W. Reinhardt and F. Toppen, Springer Berlin Heidelberg. 1: 185-209.  DOI:10.1007/978-3-642-19789-5_10 http://dx.doi.org/10.1007/978-3-642-19789-5_10


Zyl, T. L. v., I. Simonis, et al. (2009). "The Sensor Web: systems of sensor systems." International Journal of Digital Earth 2(1): 16-30.  DOI:10.1080/17538940802439549 http://dx.doi.org/10.1080/17538940802439549