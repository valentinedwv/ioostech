#summary The *Profile* feature type
#sidebar CFFeatureTypes_SideNavigation

= Profile =

<wiki:toc />

A series of connected observations along a vertical line, like an atmospheric or ocean sounding, is called a profile. For each profile, there is a single time, lat and lon.

The SWE encoding will need to support single and multiple profiles per request.  Each profile may measure at different depths, times, and locations, and also measure different variables.  This makes using a flat CSV file very inefficient.

We need to think about how a user would want to see the data presented to them.  It may be better to seperate each PROFILE in the output as its own CSV block rather than combining them.  We could also use the DataChoice element to designate which profile belongs to which row, and each Profile will get its own description block (see below).

== CDL ==

There are *four* ways to represent profile data in NetCDF files using the CF 1.6 convention.  These should all be mapped to a common SWE encoding.

=== Multidimensional ===

==== Orthogonal ====

[https://github.com/asascience-open/CFPointConventions/tree/master/profile-Orthogonal-MultiDimensional-MultipleProfiles-H.3.1 "Sample Files"]

==== Incomplete ====

[https://github.com/asascience-open/CFPointConventions/tree/master/profile-Incomplete-MultiDimensional-MultipleProfiles-H.3.2 "Sample Files"]

=== Ragged ===

==== Indexed ====

[https://github.com/asascience-open/CFPointConventions/tree/master/profile-Indexed-Ragged-MultipleProfiles-H.3.5 "Sample Files"]

==== Contiguous ====

[https://github.com/asascience-open/CFPointConventions/tree/master/profile-Contiguous-Ragged-MultipleProfiles-H.3.4 "Sample Files"]


== SWE ==

There are basic examples

=== Single Profile ===
{{{
<om:result>
  <swe:DataArray>
    <swe:elementCount>
      <swe:Count>
        <swe:value>10</swe:value>
      </swe:Count>
    </swe:elementCount>
    <swe:elementType name="SimpleDataArray">
      <swe:DataRecord>
        <swe:field name="time">
          <swe:Time definition="urn:ogc:phenomenon:time:iso8601"/>
        </swe:field>
        <swe:field name="temperature">
          <swe:Quantity definition="urn:ogc:def:phenomenon:mmisw.org:cf:temperature">
            <swe:uom code="Celsius"/>
          </swe:Quantity>
        </swe:field>
        <swe:field name="z">
          <swe:Quantity definition="urn:ogc:def:phenomenon:mmisw.org:cf:z">
            <swe:uom code="m"/>
          </swe:Quantity>
        </swe:field>
      </swe:DataRecord>
    </swe:elementType>
    <swe:encoding>
      <swe:TextBlock blockSeparator="\n" decimalSeparator="." tokenSeparator=","/>
    </swe:encoding>
    <swe:values>
      1990-01-01T00:00:00Z,25.907316,9.71331
      1990-01-01T00:00:00Z,30.689043,6.509185
      1990-01-01T00:00:00Z,35.0691,7.8092937
      1990-01-01T00:00:00Z,5.2745967,9.353531
      1990-01-01T00:00:00Z,1.0291129,5.2182965
      1990-01-01T00:00:00Z,31.410196,8.515996
      1990-01-01T00:00:00Z,9.280735,4.7469463
      1990-01-01T00:00:00Z,28.09941,7.780045
      1990-01-01T00:00:00Z,5.374381,1.4958885
      1990-01-01T00:00:00Z,24.737715,0.65638757
    </swe:values>
  </swe:DataArray>
</om:result>
}}}

=== Multiple Profiles ===

{{{
<om:result>
  <swe:DataStream>
    <swe:elementType name="message">
      <swe:DataChoice>
        <swe:item name="PROFILE_1">
          <swe:DataRecord>
            <swe:label>First Profile (PROFILE_1)</swe:label>
            <swe:field name="time">
              <swe:Time definition="http://www.opengis.net/def/property/OGC/0/SamplingTime">
                <swe:uom xlink:href="http://www.opengis.net/def/uom/ISO-8601/0/Gregorian"/>
              </swe:Time>
            </swe:field>
            <swe:field name="temp">
              <swe:Quantity definition="http://mmisw.org/ont/cf/parameter/air_temperature">
                <swe:uom code="Cel"/>
              </swe:Quantity>
            </swe:field>
          </swe:DataRecord>
        </swe:item>
        <swe:item name="PROFILE_2">
          <swe:DataRecord>
            <swe:label>Second Profile (PROFILE_2)</swe:label>
            <swe:field name="temp">
              <swe:Quantity definition="http://mmisw.org/ont/cf/parameter/air_temperature">
                <swe:uom code="Cel"/>
              </swe:Quantity>
            </swe:field>
          </swe:DataRecord>
        </swe:item>
      </swe:DataChoice>
    </swe:elementType>
    <swe:encoding>
      <swe:TextEncoding blockSeparator="\n" tokenSeparator=","/>
    </swe:encoding>
    <swe:values>
      PROFILE_1,2009-05-23T19:36:15Z,25.5
      PROFILE_2,2009-05-23T19:37:15Z,25.6
      WIND,2009-05-23T19:37:17Z,56.3,226.3
      TEMP,2009-05-23T19:38:15Z,25.5
    </swe:values>
  </swe:DataStream>
</om:result>
}}}


Alternatively see section 9.2.6 in the [http://portal.opengeospatial.org/files/?artifact_id=41157 SWE 2.0 specification] 