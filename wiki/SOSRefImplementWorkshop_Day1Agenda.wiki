#summary Day-1 Annotated Agenda for IOOS SOS Reference Implementation Workshop
#labels SOS
#sidebar SOSTableOfContents

<wiki:toc max_depth="2" />

[SOSRefImplementWorkshop_Day1Agenda Day 1] | 
[SOSRefImplementWorkshop_Day2Agenda Day 2] | 
[SOSRefImplementWorkshop_Day3Agenda Day 3]


= Overview and Workshop Goals and Objectives (Derrick) =

 * Goals for the system
 * IOOS PO view of the enterprise
 * Selected Use Cases that drive system development
   * Automate the Asset Inventory (automatic repeatable view of the system)
   * Integration via the Data Catalog/Portal/Registry
   * Various ways to connect to users 
   * Integration with other major programs
 * Assumptions/Constraints/Good to Know
 * Workflow for the next three days
   * Recording decisions
   * Noting next steps
   * Noting responsibility for future work or outstanding issues
----


= The broader SOS request and response context =

  _"While time is passing, the technological foundations upon which data management systems are built are certain to continue advancing rapidly. These considerations argue for adopting attitudes of pragmatism and realism when planning data management strategies. We should understand that technological progress is always made in incremental steps, rather than 'heroic leaps'. We should give consideration to technology choices based upon their potential contributions to the distant vision, but we should measure them by their effectiveness at addressing today's challenges."_ [#Footnotes (1)]

== General SOS Issues ==

Getting the basics and common elements squared away:
  * Settling on and clearly documenting conventions, controlled vocabularies, defaults, recommended best practices, etc, for all elements of !GetCapabilities requests and responses
  * Minimal required !DescribeSensor (SensorML) request and response
  * Aspects of !GetObservation requests and responses related to the above, and not covered by the Day 2-3 Agenda (_SWE Common Templates for CDM Scientific Feature Types_)

Or described another way:

  # *Develop clear and consistent IOOS SOS request and response specifications to be implemented uniformly across IOOS and used to:*
    * Develop and validate SOS services
    * Develop SOS clients
  # *Clarify and extend mandated vs recommended practices, including:*
    * [#Classifiers_(Controlled_vocabularies) Classifiers (Controlled vocabularies)]
    * [#Identifiers Identifiers]
    * [#Default_values_and_behaviors Default values and behaviors]
    * [#SOS_requests_Interface_Definition_Document SOS requests Interface Definition Document] (!GetCapabilities, !DescribeSensor, !GetObservation)
    * Existing practices vs needed enhancements
    * Link to the [http://ioostech.googlecode.com/files/IOOS_SOS_Documentation_v0p1.doc Word document Derrick started ~ Oct 2011, "IOOS SOS Documentation"]
    * Some [https://geo-ide.noaa.gov/wiki/index.php?title=Category:IOOS_Guidelines core IOOS Guidelines documents formerly available only as Word or pdf docs have been recently migrated to the Geo-IDE wiki]

Many of these goals could be applied to the entire workshop, but as described are tuned to the Day 1 agenda. They also involve laying out a path for useful, clear service documentation, both in the form of bare-bones [https://groups.google.com/d/topic/ioostech_dev/hTMaCJtkcWo/discussion "Interface Definition Document" (IDD)] templates that should be followed by every SOS service implementation (intended as a quick-takeup guide for service and client implementers and users), and more detailed documentation.

[http://www.oostethys.org/best-practices The OOSTethys 2008 Guides and Best Practices documents] served as a foundation for many of the current IOOS SOS implementation details. It's still a highly relevant and well structured guide that we should refer to often and re-use as needed.
----


== Classifiers (Controlled vocabularies) ==

=== general discussions ===

The target set of controlled vocabulary types we will likely need are:
  * organization type (eg, Federal agency, IOOS Regional Association, state agency, industry)
  * organizational role (service provider, data provider or asset owner)
  * keywords (including geographical regions?)
  * platform (asset) type
  * observed property
  * units-of-measure

Address implementation details, in general and for each targeted vocabulary type.

For now, until this section is better fleshed out and organized, see these wiki pages:
  * [ControlledVocabularies], from Rob Ragsdale and Derrick. Largely about observed properties.
  * [EmilioControlledVocabs], from Emilio. Miscellaneous.
  * [DescribeSensorMetadataForIOOSSOS], from Micah. Addresses several classifier types and options, particularly in SensorML.

_DPS Comment: One desirable outcome of this session would be to approve and improve [ControlledVocabularies#Existing_Observed_Property_Vocabularies this table] on the ControlledVocabularies page.  In particular we should prioritize the vocabularies, correct the URLs, and provide examples.  Then, correcting the actual usage of each vocabulary in the tables that follow is a trivial exercise._


=== organization type and role ===

See these wiki pages for earlier discussions [RepresentingRAAffiliationInServiceMetadata] and [RepresentingRolesinServiceMetadata].

=== keywords ===

Including geographical regions?

=== platform (asset) type ===

=== observed property ===

Given the adoption of CF names and their lack of support for vector properties (ie, properties made of up two or more scalars, such as winds), what is the long-term role for the original IOOS core variable names? Also, I've always found very helpful [http://www.pmel.noaa.gov/maillists/tmap/ioos_wsde/msg00699.html this 2010-1-26 email from Jeff DLB to the ioos_wsde list, describing the elements of adopting "MMI/CF phenomenon names for IOOS".]

_DPS Comment: My proposed initial prioritization for observedProperty vocabularies is to use the [http://cf-pcmdi.llnl.gov/documents/cf-standard-names/ Climate and Forecast Standard Names Table] everywhere it is appropriate.  Deviations from that can be handled on a case by case basis after the workshop._

=== units-of-measure ===

IOOS has considered and discussed UCUM (see http://aurora.regenstrief.org/~ucum/ucum.html and http://unitsofmeasure.org/) in the past; I'm not aware of a formal decision ever made, though. WaterML 2.0 apparently has also adopted UCUM. CF conventions refer primarily to _udunits_, though I'm not sure if it's a requirement.

_DPS Comment/Question: Does either UCUM or udunits provide guidance on the for of the identifier to use in GML or SWE XML elements?  In particular the codeSpace attribute?  This is part of the larger discussion on a strategy or overarching guidance on the form of identifiers, i.e. URN vs URL etc._ 

(TODO) Final decisions should be reconciled with the information at [ControlledVocabularies#Units_of_Measure].  Make sure they are consistent.

== Identifiers ==
Each term or concept used in the SOS should be referenced with a unique identifier such as a URN or URL.  If a URL is used, we do not (or do we?) require that the URL resolve to a human readable web page although that may be desirable in the future.  Even better is to have the vocabulary host implement some sort of content negotiation that presents the information differently for different clients (i.e. a browser might receive html whereas an ontology editor might receive rdf or N3).  For now, we need to determine the form of the identifiers and a policy for what we expect the identifier to reference on the web. And which set of identifiers we're targeting.

NOTE: OGC seems to be moving from  [http://think.random-stuff.org/posts/ogc-rediscovers-urls-but-lets-tighten-up-the-terminology-a-bit URNs to URLs] (See this [http://www.opengeospatial.org/ogcUrnPolicy old document] for the previous policy)

Existing IOOS identifier conventions include station (sometimes described as platform), sensors, and "collections" (network). These are currently implemented as urn's only.  See also [DescribeSensorMetadataForIOOSSOS this wiki page from Micah].  And refer to the [https://geo-ide.noaa.gov/wiki/index.php?title=IOOS_Conventions_for_Observing_Asset_Identifiers "IOOS Conventions for Asset Identifiers" document] (This document was previously only available as a Word or pdf document, but was recently migrated to a versioned page on the GEO-IDE Wiki).

== Default values and behaviors ==

A draft of elements. These may be parsed out into different sections in the final agenda. _This is not yet comprehensive or vetted, of course!_

  * access: HTTP GET and POST, but mainly GET. Note: A recent analysis of the NDBC SOS showed that POST access is barely ever used.
  * GET KVP's are case-insensitive; both K & V, or all K's and *some* V's? See OOSTethys recommendation.
  * a request to the naked, unqualified service (no request, service or version keys) returns the GetCapabilities response. _This was the [http://www.oostethys.org/ OOSTethys]-recommended convention (Eric, is that true?). Should we continue it?_
  * use of a default namespace in XML responses is forbidden
  * correct XSD and namespace references for GetCapabilities; here's a sample, from the NANOOS SOS:
{{{
<sos:Capabilities 
 xmlns:xlink="http://www.w3.org/1999/xlink" 
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xmlns:sos="http://www.opengis.net/sos/1.0" 
 xmlns:ogc="http://www.opengis.net/ogc" 
 xmlns:ows="http://www.opengis.net/ows/1.1" 
 xmlns:gml="http://www.opengis.net/gml" 
 xmlns:swe="http://www.opengis.net/swe/1.0.1" 
 xmlns:om="http://www.opengis.net/om/1.0" 
 xsi:schemaLocation="http://www.opengis.net/sos/1.0  http://schemas.opengis.net/sos/1.0.0/sosGetCapabilities.xsd" 
 version="1.0.0">
}}}
  * spatial (XYZ) conventions
    * all x & y locations are only in lat-lon (wgs84, nothing else); these are fully qualified and parseable (srs, etc), but for now it's best to also accept that we'll only deal with lat-lon
    * depth/elevation conventions?
  * temporal conventions
    * all datetime values are specified as iso8601 strings, where seconds are optional (in requests)
    * only UTC/GMT time support is currently required, for both requests and responses
    * in GetCapabilities offerings response, address convention for `<gml:TimePeriod><gml:endPosition>`
    * in GetObservation request, eventTime is optional; if absent, the latest observations will be returned. [http://www.oostethys.org/best-practices/getlatest See the relevant OOSTethys 2008 document, "Get Latest"]
  * What role, if any, for featureOfInterest and FilterEncoding implementations?
    * For some early, limited featureOfInterest discussions, [http://www.oostethys.org/best-practices/foi see this 2008/2009 OOSTethys page]. If we implement something more sophisticated than "Earth:Ocean" or just the station location (assuming fixed site), we should consider how it interacts with the practice of using "Network-`*`" offerings currently used by NDBC and NOS; there's probably overlap.
    * Discussions and examples of use of FilterEncoding, [http://external.opengis.org/twiki_public/HydrologyDWG/GwIeSOSResultFilter from a 2010 wiki page by the OGC Hydrology DWG (early WaterML 2 discussions)]
  * As the IOOS SOS guidance/profile/requirements formalize and then start to evolve, we'll have a need to define "versions" and encode the IOOS SOS version in SOS responses.


== SOS requests Interface Definition Document ==

_Recommendation:_ Use the [http://www.oostethys.org/best-practices/best-practices-get OOSTethys 2008 "Best Practices SOS HTTP GET Request" document] as our starting point for a template IDD. Move it to our wiki, edit it as needed (updates, cleanups, etc), then adapt existing representative SOS services (NDBC, NOS-COOPS, maybe NANOOS and other volunteers) using the template.

Examples, starting points:
  * [http://sdf.ndbc.noaa.gov/sos/ NDBC SOS]
  * [http://opendap.co-ops.nos.noaa.gov/ioos-dif-sos/parameters.jsp NOS-COOPS SOS]
  * [http://waterservices.usgs.gov/rest/IV-Service.html#Service USGS Water Services] (not SOS, but based on WaterML 1 and related services
  * [NANOOSNVSPythonSOS NANOOS SOS]
  * [https://wiki.52north.org/bin/view/Sensornet/SosOperations 52North Example]
  * Eric Bridger's OOSTethys/IOOS Perl server code?

Currently the interface descriptions for the two core IOOS SOS implementations (NDBC and NOS-COOPS) are quite different, as can be seen from the links above. Beyond any differences in actual implementations, using a common template description for describing the SOS services across providers is an achievable goal and would go a long way towards facilitating the development of common service and client software.

= Footnotes =

^(1)^ Hankin, S., L. Bermudez, J.D. Blower, B. Blumenthal, K.S. Casey, M. Fornwall, J. Graybeal, R.P. Guralnick, T. Habermann, E. Howlett, B. Keeley, R. Mendelssohn, R. Schlitzer, R. Signell, *D. Snowden* and A. Woolf, (2010), Data Management for the Ocean Sciences - Perspectives for the Next Decade, in _Proceedings of !OceanObs'09: Sustained Ocean Observations and Information for Society (Vol. 1)_, Venice, Italy, 21-25 September 2009, Hall, J., Harrison, D.E. & Stammer, D., Eds., ESA Publication WPP-306, [http://www.oceanobs09.net/proceedings/pp/pp21/ doi:10.5270/OceanObs09.pp.21]