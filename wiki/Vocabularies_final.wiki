#summary IOOS Instructions and Guidelines for use of Controlled Vocabularies in IOOS-compliant data services
#labels Phase-Implementation,Vocabularies,SOS
#sidebar SOSTableOfContents


<wiki:toc max_depth="3" />

= Introduction =

(This is place-holder text) Developers of IOOS services should strive to use Controlled Vocabularies whenever appropriate.  This page describes some options for Controlled Vocabularies to chose from, examples of how to implement them in various data formats and information about how to update existing vocabularies.  The material presented here should evolve into a policy but currently there are several open questions to be resolved.  

*TO-DO: Identify and describe exactly where in the SOS responses and requests each controlled vocabulary is relevant and needs to be addressed. Specific instructions/examples will be listed in this document, and will be completed by linking to SOS response templates (XML files)*


= IOOS Controlled Vocabularies =

IOOS has defined the use of specific controlled vocabularies for the following categories or concepts:
 * observed property
 * platform (asset) type
 * organization type
 * organizational role
 * keywords
 * units-of-measure


== Observed Properties ==

IOOS supports the inclusion and standard referencing of a large set of observed properties (sometimes referred to as phenomena, parameters, or variables). Any property encompassed by the following two vocabularies is supported:
  # *[http://cf-pcmdi.llnl.gov/documents/cf-standard-names/about Climate & Forecast (CF) Standard Names Parameter Vocabulary.]* The MMI vocabulary location is: http://mmisw.org/ont/cf/parameter
  # *[TODO_IOOSVocabPage IOOS Parameter Vocabulary.]* A vocabulary created via an IOOS community polling of terms in use by RA's in 2009-2010, and a follow-up process of QA/QC, refinement and consolidation of duplicates. The MMI vocabulary location is: http://mmisw.org/ont/ioos/parameter

_All references to parameters from these vocabularies should be done via MMI URL's_, such as  http://mmisw.org/ont/cf/parameter/sea_water_temperature  or  http://mmisw.org/ont/ioos/parameter/ammonia

*Usage in SOS request parameters and XML responses: _[TO-DO: the Response entries will be linked to SOS response templates, so that full usage details are readily accessible]_ *

|| *SOS Operation* || *Request parameters* || *Response: XML block (XPath)* ||
|| GetCapabilities || - || /sos:Capabilities/ows:OperationsMetadata/ows:Operation/ows:Parameter/ows:AllowedValues/ows:Value ||
||         "       || - || /sos:Capabilities/sos:Contents/sos:ObservationOfferingList/sos:ObservationOffering/sos:observedProperty ||
|| GetObservation  || || _!TimeSeries feature-type, multi-sensor response:_  ||
||         "       || observedProperty || `*` /om:observedProperty ||
||         "       ||       "          || `*` /om:result/swe:DataStream/swe:DataChoice/swe:item/swe:DataRecord/swe:field/swe:Quantity ||
|| DescribeSensor || - || _[TO-DO]_ ||

- None, Not applicable

`*` _Preceded by /om:!ObservationCollection/om:member/om:Observation_

=== Selecting a vocabulary term ===

For convenience and completeness, the IOOS Parameter Vocabulary incorporates CF terms that are widely used in IOOS. An MMI-based ontological mapping or cross-walk has been created between matching IOOS and CF terms, such that a reference to a term in one vocabulary is automatically linked to an appropriate term on the other vocabulary if such a match exists.

  * _The use of CF vocabulary references is encouraged (but not mandated) when a relevant term exists in that vocabulary._ This preference exists to support interoperability with the wider community using CF.
  * _When the desired term is not found on the CF vocabulary, an IOOS Parameter Vocabulary reference should be used._
  * _If the desired parameter is not found on either vocabulary_, see the section [#Terms_not_found_in_either_vocabulary "Terms not found in either vocabulary"], below.

=== Terms not found in either vocabulary ===

If the parameter is not on the CF or IOOS vocabularies, engage IOOS to add it to the IOOS vocabulary using a publicized and accepted process that's reasonably fast and not much of a burden on anyone involved. In parallel, IOOS will maintain an engagement with the CF community to discuss adding parameters that are not currently present. *(Need to provide instructions to service providers as to what to do in the short term: eg, include the observed property using a urn template similar to station identifiers, or the MMI IOOS url parameter reference? Or do not include the observed property until the term has been added to the IOOS vocabulary?)

=== Composite Properties ===

The CF standard names vocabulary only defines scalar properties. Previously, IOOS defined three composite ("vector") properties made up of two or more scalar properties: *winds*, *waves* and *currents*. These composite properties are supported via the IOOS Parameter Vocabulary, and will be referenced like any other term there, eg:  http://mmisw.org/ont/ioos/winds


== Platform/Station Types ==

(To be added later)

== Organization Types ==

See these wiki pages for earlier discussions [RepresentingRAAffiliationInServiceMetadata] and [RepresentingRolesinServiceMetadata].

  * [https://groups.google.com/d/msg/ioostech_dev/aAsiZta7mVs/WUfVKMalZf0J Relevant discussion thread from ioostech_dev, from Oct 2011 (_Institution roles in SOS & IOOS Catalog: "Organization" vs "Data Provider"_)]
  * _Describe convention used by Eric in the IOOS Catalog, and also [NANOOSNVSPythonSOS adopted by the NANOOS SOS service]_ It's the name from XPath /sml:member/sml:System/sml:contact/sml:ResponsibleParty/sml:organizationName, but I can't remember which "contactType role" is being used (eg, <sml:contact xlink:role="urn:ogc:def:classifiers:OGC:contactType:owner"> below) when multiple roles are listed in the response.
  * See also [DescribeSensorMetadataForIOOSSOS discussion by Micah, in wiki page DescribeSensorMetadataForIOOSSOS].

=== Regional Associations ===

IOOS Regional Associations (RA's) should be referenced using standard RA acronyms (GLOS, SECOORA, etc) as listed in the MMI-hosted RA vocabulary at http://mmisw.org/ont/ioos/ioos_ra_descriptions . MMI URL references such as http://mmisw.org/ont/ioos/ioos_ra_descriptions/SECOORA must be used when appropriate, as described below; the RA acronym on this URL is case sensitive and must be all uppercase.

Usage in SOS XML responses: [TO-DO: the Response entries will be linked to SOS response templates, so that full usage details are readily accessible] 

|| *SOS Operation* || *Request parameters* || *Response: XML block (XPath)* || Comment ||

|| GetCapabilities || - || /sos:Capabilities/ows:ServiceIdentification/ows:Keywords/ows:Keyword  || Required. RA keyword must be the first keyword listed. ||
|| GetObservation  || - || - || No RA reference. ||
|| DescribeSensor || - ||  ||
||         "       || - || `*` /sml:classification/sml:ClassifierList/sml:classifier[name="ParentNetwork"]/sml:Term[definition="urn:ioos:def:classifier:NOAA:parentNetwork"]/sml:value || Required. Also use <sml:codeSpace xlink:href="http://mmisw.org/ont/ioos/ioos_ra_descriptions"/> ||
||         "       || - || `*` /sml:contact[xlink:role="urn:ogc:def:classifiers:OGC:contactType:publisher"]/sml:ResponsibleParty/sml:organizationName || Optional. Use if data are distributed via RA-hosted data service. ||

- None, Not applicable

`*` _Preceded by /sml:SensorML/sml:member/sml:System_

=== Sectors ===

An MMI vocabulary will be created, containing these terms:
  * Government–Federal
  * Government–State 
  * Government–Municipal
  * Tribal
  * Academic
  * Industry
  * Non-Profit
  * Other
  * Unknown

"International" providers will be handled via the specification of a country name in the SensorML Operator role contact information.

== Keywords ==

Including geographical regions?


= Other relevant concepts =
== Other Organization Role ==
(Mainly in SensorML)
Service provider, data provider, asset owner.

== Units of Measure ==

Units of Measure are not actually a vocabulary per se, but are rather a mix of vocabulary terms and syntax for combinations. Recommend (but not mandate) use of [http://unitsofmeasure.org/ UCUM] or [http://www.unidata.ucar.edu/software/udunits/ UDUNITS]. But versions must be kept in mind (eg, UDUNITS-1 vs UDUNITS-2).