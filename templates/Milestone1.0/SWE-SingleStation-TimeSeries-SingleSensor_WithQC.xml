<?xml version="1.0" encoding="UTF-8"?>
<!-- This template is an example implementation of the SWE Quality element -->
<!-- applied to the NDBC QC flags for an air temperature measurement. -->
<!-- http://sdftest.ndbc.noaa.gov/sos/qcflags.shtml -->
<swe2:DataStream
  xmlns:swe2="http://www.opengis.net/swe/2.0"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.opengis.net/swe/2.0 http://schemas.opengis.net/sweCommon/2.0/swe.xsd">

  <swe2:elementType
    name="ioosStationData">
    <swe2:DataRecord>
      <swe2:field
        name="time">
        <swe2:Time
          definition="http://www.opengis.net/def/property/OGC/0/SamplingTime">
          <swe2:uom
            xlink:href="http://www.opengis.net/def/uom/ISO-8601/0/Gregorian" />
        </swe2:Time>
      </swe2:field>

      <swe2:field
        name="stationID">
        <swe2:Text
          definition="http://mmisw.org/ont/ioos/definition/stationID">
          <swe2:value>urn:ioos:station:wmo:41001</swe2:value>
        </swe2:Text>
      </swe2:field>

      <swe2:field
        name="platformLocation">
        <swe2:Vector
          definition="http://www.opengis.net/def/property/OGC/0/PlatformLocation"
          referenceFrame="https://ioostech.googlecode.com/svn/trunk/IoosCRS/IoosBuoyCRS.xml"
          localFrame="#PlatformFrame">
          <swe2:coordinate
            name="latitude">
            <swe2:Quantity
              definition="http://mmisw.org/ont/cf/parameter/latitude"
              axisID="Lat">
              <swe2:uom
                code="deg" />
              <swe2:value>32.382</swe2:value>
            </swe2:Quantity>
          </swe2:coordinate>
          <swe2:coordinate
            name="longitude">
            <swe2:Quantity
              definition="http://mmisw.org/ont/cf/parameter/longitude"
              axisID="Lon">
              <swe2:uom
                code="deg" />
              <swe2:value>-75.415</swe2:value>
            </swe2:Quantity>
          </swe2:coordinate>
          <swe2:coordinate
            name="height">
            <swe2:Quantity
              definition="http://mmisw.org/ont/cf/parameter/height"
              axisID="Z">
              <swe2:uom
                code="m" />
              <swe2:value>0.5</swe2:value>
            </swe2:Quantity>
          </swe2:coordinate>
        </swe2:Vector>
      </swe2:field>

      <!-- ==================== SENSOR-SPECIFIC FIELDS ======================= -->
      <swe2:field
        name="sensorID">
        <swe2:Text
          definition="http://mmisw.org/ont/ioos/definition/sensorID">
          <swe2:value>urn:ioos:station:wmo:41001:sensor1</swe2:value>
        </swe2:Text>
      </swe2:field>

      <swe2:field
        name="height">
        <swe2:Quantity
          definition="http://mmisw.org/ont/cf/parameter/height"
          referenceFrame="#PlatformFrame">
          <swe2:uom
            code="m" />
          <swe2:value>5</swe2:value>
        </swe2:Quantity>
      </swe2:field>

      <!-- The "data" fields follow (measured quantities/properties of this sensor) -->
      <swe2:field
        name="air_temperature">
        <swe2:Quantity
          definition="http://mmisw.org/ont/cf/parameter/air_temperature">
          
          <!-- The next 3 elements specify the quality of the Air Temperature field-->
          <swe2:quality>
            <!-- NDBC EQC Quality -->
            <swe2:Category
              definition="http://sdftest.ndbc.noaa.gov/sos/qcflags.shtml">
              <swe2:label>EQC Flag</swe2:label>
              <swe2:codeSpace
                xlink:href="http://sdftest.ndbc.noaa.gov/sos/qcflags.shtml"/>
                <!-- This is not a formal code space. Use it till something better is created.-->
              <swe2:constraint>
                <swe2:AllowedTokens id="ndbcEqcFlags">
                  <swe2:value>T</swe2:value>
                  <swe2:value>M</swe2:value>
                  <swe2:value>W</swe2:value>
                  <swe2:value>D</swe2:value>
                  <swe2:value>S</swe2:value>
                  <swe2:value>V</swe2:value>
                  <swe2:value>L</swe2:value>
                  <swe2:value>H</swe2:value>
                  <swe2:value>R</swe2:value>
                </swe2:AllowedTokens>
              </swe2:constraint>
            </swe2:Category>
          </swe2:quality>

          <swe2:quality>
            <!-- NDBC DQA Quality -->
            <!-- Unfortuantly there is no way to specify an array quality elements inside the -->
            <!-- quantity. To allow for upto 2 values, two quality fields must be defined. -->
            <swe2:Category
              definition="http://sdftest.ndbc.noaa.gov/sos/qcflags.shtml">
              <swe2:label>DQA Flag 1</swe2:label>
              <swe2:codeSpace
                xlink:href="http://sdftest.ndbc.noaa.gov/sos/qcflags.shtml"/>
              <!-- This is not a formal code space. Use it till something better is created.-->
              <swe2:constraint>
                <swe2:AllowedTokens id="ndbcDqaFlags">
                  <swe2:value>a</swe2:value>
                  <swe2:value>b</swe2:value>
                  <swe2:value>d</swe2:value>
                  <swe2:value>f</swe2:value>
                  <swe2:value>g</swe2:value>
                  <swe2:value>i</swe2:value>
                  <swe2:value>j</swe2:value>
                  <swe2:value>k</swe2:value>
                  <swe2:value>m</swe2:value>
                  <swe2:value>n</swe2:value>
                  <swe2:value>p</swe2:value>
                  <swe2:value>q</swe2:value>
                  <swe2:value>r</swe2:value>
                  <swe2:value>s</swe2:value>
                  <swe2:value>t</swe2:value>
                  <swe2:value>v</swe2:value>
                  <swe2:value>w</swe2:value>
                  <swe2:value>x</swe2:value>
                  <swe2:value>y</swe2:value>
                  <swe2:value>z</swe2:value>
                </swe2:AllowedTokens>
              </swe2:constraint>
            </swe2:Category>
          </swe2:quality>
          
          <swe2:quality>
            <!-- Second DQA element -->
            <swe2:Category
              definition="http://sdftest.ndbc.noaa.gov/sos/qcflags.shtml">
              <swe2:label>DQA Flag 2</swe2:label>
              <swe2:codeSpace
                xlink:href="http://sdftest.ndbc.noaa.gov/sos/qcflags.shtml"/>
              <!-- This is not a formal code space. Use it till something better is created.-->
              <swe2:constraint xlink:href="#ndbcDqaFlags"/>
              <!-- The second DQA element can reference the constraints defined in the first -->
            </swe2:Category>
          </swe2:quality>
          <!-- End quality elements -->
          
          <swe2:uom
            code="Celsius" />
        </swe2:Quantity>
      </swe2:field>

      <swe2:field
        name="wind_speed">
        <swe2:Quantity
          definition="http://mmisw.org/ont/cf/parameter/wind_speed">
          <swe2:uom
            code="m/s" />
        </swe2:Quantity>
      </swe2:field>
      <swe2:field
        name="wind_to_direction">
        <swe2:Quantity
          definition="http://mmisw.org/ont/cf/parameter/wind_to_direction">
          <swe2:uom
            code="degrees" />
        </swe2:Quantity>
      </swe2:field>

      <!-- ////////////////// END DATASTREAM-WIDE FIELDS //////////////////////// -->
    </swe2:DataRecord>
  </swe2:elementType>


  <swe2:encoding>
    <!-- SWE encoding and data values -->
    <!-- swe:encoding *must* be always specified exactly as described below, -->
    <!-- to avoid the need to have fully general parsers that interpret -->
    <!-- swe:TextEncoding. That is, parsers may hard-code this particular -->
    <!-- swe:TextEncoding specification. -->
    <swe2:TextEncoding
      decimalSeparator="."
      tokenSeparator=","
      blockSeparator="&#10;" />
  </swe2:encoding>
  <swe2:values>
    2009-05-23T00:00:00Z,15.4,,,,2.0,280
    2009-05-23T01:00:00Z,15.4,M,d,a,2.0,280
    2009-05-23T02:00:00Z,15.4,,,,2.0,280
    2009-05-23T03:00:00Z,15.4,,,,2.0,280
    2009-05-23T04:00:00Z,15.4,,,,2.0,280
    2009-05-23T05:00:00Z,15.4,T,a,,2.0,280
  </swe2:values>
</swe2:DataStream>
