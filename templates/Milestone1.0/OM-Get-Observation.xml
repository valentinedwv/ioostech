<?xml version="1.0" encoding="UTF-8"?>
<!-- Template Document for a Generic (independant of feature type) Get Observation -->
<!-- Work in progress... Content and structure are final. Cleaning up formatting and comments  -->
<!-- The GO contains one member observation per feature type in the response.  -->
<!-- The result block in the template is empty. Examples of the result block are in the SWE -->
<!-- templates defined seperately for each strucutre and concept. Any of these SWE results could -->
<!-- be expressed in the result block of this document with the appropriate matching metadata. -->
<!--  -->
<!-- ================================================== -->
<!-- COMMENTS on namespace specifications: -->
<!-- - gml: using an unversioned namespace has been confirmed to be ok; -->
<!--   the om 1.0 schema defines GML 3.1.1 as the version used -->
<!-- ================================================== -->
<om:ObservationCollection
  xmlns:om="http://www.opengis.net/om/1.0"
  xmlns:gml="http://www.opengis.net/gml"
  xmlns:swe="http://www.opengis.net/swe/1.0.1"
  xmlns:swe2="http://www.opengis.net/swe/2.0"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.opengis.net/om/1.0 http://schemas.opengis.net/om/1.0.0/om.xsd">

  <!-- ==================================================================
       TOP-LEVEL METADATA
       =============================================================== -->
  <!-- DISCLAIMER -->
  <gml:metaDataProperty
    xlink:title="disclaimer">
    <gml:GenericMetaData>
      <gml:description>DISCLAIMER</gml:description>
    </gml:GenericMetaData>
  </gml:metaDataProperty>

  <!-- IOOS SOS VERSION -->
  <gml:metaDataProperty
    xlink:title="ioosTemplateVersion"
    xlink:href="http://code.google.com/p/ioostech/source/browse/#svn%2Ftrunk%2Ftemplates%2FMilestone1.0">
    <gml:version>1.0</gml:version>
  </gml:metaDataProperty>

  <!-- Define the Bounding Box of all features in the response -->
  <!-- The upper and lower corner are equal if the reponse contains a single point -->
  <gml:boundedBy>
    <gml:Envelope
      srsName="http://www.opengis.net/def/crs/EPSG/0/4326">
      <gml:lowerCorner>34.7 -72.73</gml:lowerCorner>
      <gml:upperCorner>34.7 -72.73</gml:upperCorner>
    </gml:Envelope>
  </gml:boundedBy>

  <!-- ===========================================================
    - For a station offering, the response will return one CF feature type,
      corresponding to one om:member/om:Observation block.
    - For a network offering, the response may return multiple stations
      (features) spanning up to 3 CF feature types; each unique CF feature 
      type will be encoded in a separate om:member/om:Observation block 
      that may contain multiple stations.
    =========================================================== -->
  <om:member>
    <om:Observation>

      <!-- ==================================================================
        =====================================================================
        *******             START OF "METADATA" BLOCK                 *******
        =====================================================================
        ===================================================================== -->

      <!-- =========================================================== 
        gml:description
        Intended as fairly free-form text for human eyeballs.
        COMMENTS: COME UP WITH USAGE GUIDELINE FOR THIS ELEMENT'S CONTENT
        ============================================================== -->
      <gml:description>Observations at point station urn:ioos:station:wmo:41001, 150 NM East of Cape
        HATTERAS</gml:description>

      <!-- ===========================================================
        samplingTime  
        Includes all temporal response metadata, encoded as an iso8601 string.
        Currently only UTC is supported/advocated.
        ============================================================== -->
      <om:samplingTime>
        <gml:TimePeriod>
          <gml:beginPosition>2009-05-23T00:00:00Z</gml:beginPosition>
          <gml:endPosition>2009-05-23T02:00:00Z</gml:endPosition>
        </gml:TimePeriod>
      </om:samplingTime>

      <!-- ===========================================================
        procedure
        =========================================================== -->
      <!-- additional stations returned by a network offering will be listed
        as additional gml:member elements -->
      <om:procedure>
        <om:Process>
          <gml:member
            xlink:href="urn:ioos:station:wmo:41001" />
        </om:Process>
      </om:procedure>

      <!-- ===========================================================
        observedProperty  
        This block contains a list of *scalar* properties only, referencing the 
        MMI CF or IOOS parameter vocabularies; see the wiki documentation on the 
        topic for the choice of vocabularies. Requests constructed using composite 
        (vector) phenomena such as "winds" will return the scalar components only. 
        This scheme accommodates both true composite phenomena like winds, and 
        ad-hoc requests for multiple properties (eg, water and air temperature). 
        The general swe:CompositePhenomenon element is used even when the response 
        returns a single observed property.
        ============================================================== -->
      <om:observedProperty>
        <swe:CompositePhenomenon
          dimension="5"
          gml:id="observedproperties1">
          <gml:name>Response Observed Properties</gml:name>
          <swe:component
            xlink:href="http://mmisw.org/ont/cf/parameter/air_temperature" />
          <swe:component
            xlink:href="http://mmisw.org/ont/cf/parameter/wind_speed" />
          <swe:component
            xlink:href="http://mmisw.org/ont/cf/parameter/wind_direction" />
          <swe:component
            xlink:href="http://mmisw.org/ont/cf/parameter/sea_water_temperature" />
          <swe:component
            xlink:href="http://mmisw.org/ont/ioos/parameter/dissolved_oxygen" />
        </swe:CompositePhenomenon>
      </om:observedProperty>



      <!-- ===========================================================
        featureOfInterest  
        Encompasses *all* spatial and feature-type response metadata.
        ============================================================== -->
      <om:featureOfInterest>
        <gml:FeatureCollection>

          <!-- CF Feature Type (discrete-sampling-geometry). COMMENT: Why vers. 1.6 specifically? -->
          <gml:metaDataProperty>
            <gml:name codeSpace="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#discrete-sampling-geometries">timeSeries</gml:name>
          </gml:metaDataProperty>

          <!-- Geographic (lat lon) Bounding Box of this feature -->
          <gml:boundedBy>
            <!-- For a single station the upper corner and lower corner are the same -->
            <!-- For a multi station response define the bounding box of the stations -->
            <gml:Envelope
              srsName="http://www.opengis.net/def/crs/EPSG/0/4326">
              <gml:lowerCorner>34.7 -72.73</gml:lowerCorner>
              <gml:upperCorner>34.7 -72.73</gml:upperCorner>
            </gml:Envelope>
          </gml:boundedBy>

          <!-- Feature geographic location (lat & lon only, no z) -->
          <!-- Always use epsg 4326.
            Use gml:location/gml:MultiPoint/gml:pointMembers as a generalized way to
            also handle Network-offering responses that include multiple points (stations). 
            This is analogous to our use of om:observedProperty/swe:CompositePhenomenon 
            even for single-property responses. -->
          <gml:location>
            <gml:MultiPoint
              srsName="http://www.opengis.net/def/crs/EPSG/0/4326">
              <gml:pointMembers>
                <!-- For each station in the result add an additional point -->
                <gml:Point>
                  <gml:name>urn:ioos:station:wmo:41001</gml:name>
                  <gml:pos>34.7 -72.73</gml:pos>
                </gml:Point>
              </gml:pointMembers>
            </gml:MultiPoint>
          </gml:location>
        </gml:FeatureCollection>
      </om:featureOfInterest>


      <!-- ==================================================================
        =====================================================================
        *******              END OF "METADATA" BLOCK                  *******
        =====================================================================
        ===================================================================== -->


      <!-- ===========================================================
        om:result (THE "DATA" BLOCK)
        =========================================================== -->
      <om:result>
        <!-- This block can contain any of the various example SWE Result blocks defined in the -->
        <!-- Milestone 1.0 templates as appropriate to the data described above -->
      </om:result>

    </om:Observation>
  </om:member>
</om:ObservationCollection>
